{% extends "mmlog/base.html" %}

            {% block header %}
                {% include 'menubar.html' %}
            {% endblock %}

            {% block tree%}
                <!-- QUESTA PARTE DEVE ESSERE CREATA DINAMICAMENTE
                    DAI DATI DEL DB -->
                <div id="tree">
                  <ul id="treeData" style="display: none;">
                    <li id="1">Impianto A
                      <ul>
                        <li id="3">Macchina 1
                          <ul>
                              <li id="5">Componente 1.1
                                  <ul>
                                    <li id="5">Sub-componente 1.1.1
                                    <li id="6">Sub-componente 1.1.2
                                  </ul>
                              <li id="6">Componente 1.2
                          </ul>
                        <li id="4">Macchina 2
                      </ul>
                    <li id="2">Impianto B
                      <ul>
                        <li id="7">Macchina 1
                        <li id="8">Macchina 2
                      </ul>
                  </ul>
                </div>

            {% endblock %}

            {% block form %}
                <div id="selected_node"></div>
                <form action="/mmlog/add_activity_sheet/" method="POST">
                    {% csrf_token %}
                    <!-- FORM START -->
<div>
  <fieldset><legend>Dati intervento</legend>
<div class="row"><div class="one twelfths"> </div><div class="two twelfths">{{ form.entry_date.label }}{{ form.entry_date }}{% for e in form.entry_date.errors %}<p class="red message">{{ e }}</p>{% endfor %}</div><div class="two twelfths">{{ form.entry_time.label }}{{ form.entry_time }}{% for e in form.entry_time.errors %}<p class="red message">{{ e }}</p>{% endfor %}</div></div><div class="row"><div class="one twelfths"> </div><div class="three twelfths">{{ form.component.label }}{{ form.component }}{% for e in form.component.errors %}<p class="red message">{{ e }}</p>{% endfor %}</div><div class="one twelfths"> </div><div class="two twelfths">{{ form.requested_by.label }}{{ form.requested_by }}{% for e in form.requested_by.errors %}<p class="red message">{{ e }}</p>{% endfor %}</div></div><div class="row"><div class="one twelfths"> </div><div class="two twelfths">{{ form.status.label }}{{ form.status }}{% for e in form.status.errors %}<p class="red message">{{ e }}</p>{% endfor %}</div></div></fieldset>
  <br/>
  <fieldset><legend>Personale interno Uniacque</legend>
<div class="row"><div class="one twelfths"> </div><div class="three twelfths">{{ form.internal_responsible.label }}{{ form.internal_responsible }}{% for e in form.internal_responsible.errors %}<p class="red message">{{ e }}</p>{% endfor %}</div><div class="one twelfths"> </div><div class="one twelfths">{{ form.num_internal_operators.label }}{{ form.num_internal_operators }}{% for e in form.num_internal_operators.errors %}<p class="red message">{{ e }}</p>{% endfor %}</div></div><div class="row"><div class="one twelfths"> </div><div class="one twelfths">{{ form.internal_intervention_time_days.label }}{{ form.internal_intervention_time_days }}{% for e in form.internal_intervention_time_days.errors %}<p class="red message">{{ e }}</p>{% endfor %}</div><div class="one twelfths">{{ form.internal_intervention_time_hours.label }}{{ form.internal_intervention_time_hours }}{% for e in form.internal_intervention_time_hours.errors %}<p class="red message">{{ e }}</p>{% endfor %}</div><div class="one twelfths">{{ form.internal_intervention_time_minutes.label }}{{ form.internal_intervention_time_minutes }}{% for e in form.internal_intervention_time_minutes.errors %}<p class="red message">{{ e }}</p>{% endfor %}</div></div><div class="row"><div class="one twelfths"> </div><div class="one twelfths">{{ form.internal_intervention_duration.label }}{{ form.internal_intervention_duration }}{% for e in form.internal_intervention_duration.errors %}<p class="red message">{{ e }}</p>{% endfor %}</div></div></fieldset>
  <br/>
  <fieldset><legend>Personale esterno Uniacque</legend>
<div class="row"><div class="one twelfths"> </div><div class="two twelfths">{{ form.external_company.label }}{{ form.external_company }}{% for e in form.external_company.errors %}<p class="red message">{{ e }}</p>{% endfor %}</div></div><div class="row"><div class="one twelfths"> </div><div class="three twelfths">{{ form.external_responsible.label }}{{ form.external_responsible }}{% for e in form.external_responsible.errors %}<p class="red message">{{ e }}</p>{% endfor %}</div><div class="one twelfths"> </div><div class="one twelfths">{{ form.num_external_operators.label }}{{ form.num_external_operators }}{% for e in form.num_external_operators.errors %}<p class="red message">{{ e }}</p>{% endfor %}</div></div><div class="row"><div class="one twelfths"> </div><div class="one twelfths">{{ form.external_intervention_time_days.label }}{{ form.external_intervention_time_days }}{% for e in form.external_intervention_time_days.errors %}<p class="red message">{{ e }}</p>{% endfor %}</div><div class="one twelfths">{{ form.external_intervention_time_hours.label }}{{ form.external_intervention_time_hours }}{% for e in form.external_intervention_time_hours.errors %}<p class="red message">{{ e }}</p>{% endfor %}</div><div class="one twelfths">{{ form.external_intervention_time_minutes.label }}{{ form.external_intervention_time_minutes }}{% for e in form.external_intervention_time_minutes.errors %}<p class="red message">{{ e }}</p>{% endfor %}</div></div><div class="row"><div class="one twelfths"> </div><div class="one twelfths">{{ form.external_intervention_duration.label }}{{ form.external_intervention_duration }}{% for e in form.external_intervention_duration.errors %}<p class="red message">{{ e }}</p>{% endfor %}</div></div></fieldset>
  <br/>
  <fieldset><legend>Consuntivo intervento</legend>
<div class="row"><div class="one twelfths"> </div><div class="two twelfths">{{ form.intervention_start_date.label }}{{ form.intervention_start_date }}{% for e in form.intervention_start_date.errors %}<p class="red message">{{ e }}</p>{% endfor %}</div><div class="one twelfths"> </div><div class="two twelfths">{{ form.intervention_start_time.label }}{{ form.intervention_start_time }}{% for e in form.intervention_start_time.errors %}<p class="red message">{{ e }}</p>{% endfor %}</div></div><div class="row"><div class="one twelfths"> </div><div class="two twelfths">{{ form.intervention_completion_date.label }}{{ form.intervention_completion_date }}{% for e in form.intervention_completion_date.errors %}<p class="red message">{{ e }}</p>{% endfor %}</div><div class="one twelfths"> </div><div class="two twelfths">{{ form.intervention_completion_time.label }}{{ form.intervention_completion_time }}{% for e in form.intervention_completion_time.errors %}<p class="red message">{{ e }}</p>{% endfor %}</div></div><div class="row"><div class="one twelfths"> </div><div class="one twelfths">{{ form.machine_down_time_days.label }}{{ form.machine_down_time_days }}{% for e in form.machine_down_time_days.errors %}<p class="red message">{{ e }}</p>{% endfor %}</div><div class="one twelfths">{{ form.machine_down_time_hours.label }}{{ form.machine_down_time_hours }}{% for e in form.machine_down_time_hours.errors %}<p class="red message">{{ e }}</p>{% endfor %}</div><div class="one twelfths">{{ form.machine_down_time_minutes.label }}{{ form.machine_down_time_minutes }}{% for e in form.machine_down_time_minutes.errors %}<p class="red message">{{ e }}</p>{% endfor %}</div></div><div class="row"><div class="one twelfths"> </div><div class="one twelfths">{{ form.machine_down_time.label }}{{ form.machine_down_time }}{% for e in form.machine_down_time.errors %}<p class="red message">{{ e }}</p>{% endfor %}</div></div><div class="row"><div class="one twelfths"> </div><div class="two twelfths">{{ form.intervention_type.label }}{{ form.intervention_type }}{% for e in form.intervention_type.errors %}<p class="red message">{{ e }}</p>{% endfor %}</div><div class="one twelfths"> </div><div class="two twelfths">{{ form.component_status.label }}{{ form.component_status }}{% for e in form.component_status.errors %}<p class="red message">{{ e }}</p>{% endfor %}</div></div><div class="row"><div class="one twelfths"> </div><div class="five twelfths">{{ form.intervention_description.label }}{{ form.intervention_description }}{% for e in form.intervention_description.errors %}<p class="red message">{{ e }}</p>{% endfor %}</div></div></fieldset>
</div>




                    <!-- FORM END -->
                    <input type="submit" value="Submit" />
                </form>
        <script>
                function update_total_duration(){
                        a = $("#id_internal_intervention_time_days").val() * 60 * 24,
                        //alert (a);
                        b = $("#id_internal_intervention_time_hours").val() * 60,
                        //alert (b);
                        c = $("#id_internal_intervention_time_minutes").val(),
                        //alert (c);
                        $("#id_internal_intervention_duration").val(parseInt(a)+parseInt(b)+parseInt(c));
                }

                $("#id_internal_intervention_time_days").change(function(){
                        update_total_duration();
                });
                $("#id_internal_intervention_time_hours").change(function(){
                        update_total_duration();
                });
                $("#id_internal_intervention_time_minutes").change(function(){
                        update_total_duration();
                });

        </script>
            {% endblock %}
